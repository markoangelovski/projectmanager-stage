(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{24:function(e,t,n){"use strict";n.r(t);var a=n(14),l=n(15),o=n(17),d=n(1),c=n(9),i=n(3);const r=document.getElementById("project-title"),s=document.getElementById("project-description"),m=document.getElementById("project-pl"),u=document.getElementById("nas-path"),v=document.getElementById("kanboard-url"),p=document.getElementById("dev-url"),b=document.getElementById("stage-url"),g=document.getElementById("prod-url"),y=document.getElementById("live-url");async function h(e){e.preventDefault();const t={title:r.value,description:s.value,pl:m.value,kanboard:v.value,dev:p.value,stage:b.value,prod:g.value,live:y.value,nas:u.value};try{const e=await Object(d.c)(t,"projects");e.error&&Object(i.a)(e.error),Object(i.b)(e.message),function(e){const t=document.getElementById("full-width-modalLabel");t.setAttribute("style","color: limegreen;"),t.innerText=e.message,document.querySelector(".modal-body > p").innerText="Project details are the following:";let n=r.parentElement,a=s.parentElement,l=m.parentElement,o=u.parentElement,d=v.parentElement,c=p.parentElement,i=b.parentElement,h=g.parentElement,E=y.parentElement;document.getElementById("project-title").parentElement.innerHTML=`<p class="col-form-label">${e.project.title}</p>`,document.getElementById("project-description").parentElement.innerHTML=`<p class="col-form-label">${e.project.description}</p>`,document.getElementById("project-pl").parentElement.innerHTML=`<p class="col-form-label">${e.project.pl}</p>`,document.getElementById("nas-path").parentElement.innerHTML=`<p class="col-form-label">${e.project.nas}</p>`,document.getElementById("kanboard-url").parentElement.innerHTML=`<p class="col-form-label">${e.project.kanboard}</p>`,document.getElementById("dev-url").parentElement.innerHTML=`<p class="col-form-label">${e.project.dev}</p>`,document.getElementById("stage-url").parentElement.innerHTML=`<p class="col-form-label">${e.project.stage}</p>`,document.getElementById("prod-url").parentElement.innerHTML=`<p class="col-form-label">${e.project.prod}</p>`,document.getElementById("live-url").parentElement.innerHTML=`<p class="col-form-label">${e.project.live}</p>`;const f=document.querySelector(".modal-footer");f.children[0].setAttribute("style","display:none;"),f.children[1].setAttribute("style","display:none;");const j=document.getElementById("continue");j.setAttribute("style","display:block"),j.addEventListener("click",function(){const e=document.getElementById("full-width-modalLabel");e.setAttribute("style","color: #343a40;"),e.innerText="Create a new project",document.querySelector(".modal-body > p").innerText="Fill out the details of your new project.:",n.innerHTML='<div class="col-sm-10"><input type="text" class="form-control" id="project-title" placeholder="Project title" required=""><span class="help-block"><small id="warning-message"></small></span></div>',a.innerHTML='<div class="col-sm-10"><textarea class="form-control" id="project-description" rows="5" placeholder="Enter a brief description of the project" style="margin-top: 0px; margin-bottom: 0px; height: calc(1.5em + .9rem + 2px);"></textarea></div>',l.innerHTML='<div class="col-sm-10"><input type="text" class="form-control" id="project-pl" placeholder="Project owner"></div>',o.innerHTML='<div class="col-sm-10"><input type="text" class="form-control" id="nas-path" placeholder="Enter path to project folder on NAS"></div>',d.innerHTML='<div class="col-md-10"><input class="form-control" type="url" id="kanboard-url" name="kanboard-url" placeholder="Link to Project\'s board in Kanban"></div>',c.innerHTML='<div class="col-md-10"><input class="form-control" type="url" id="dev-url" name="dev-url" placeholder="Link to Dev environment"></div>',i.innerHTML='<div class="col-md-10"><input class="form-control" type="url" id="stage-url" name="stage-url" placeholder="Link to Stage environment"></div>',h.innerHTML='<div class="col-md-10"><input class="form-control" type="url" id="prod-url" name="prod-url" placeholder="Link to Production environment"></div>',E.innerHTML='<div class="col-md-10"><input class="form-control" type="url" id="live-url" name="live-url" placeholder="Link to Live site"></div>';const t=document.querySelector(".modal-footer");t.children[0].setAttribute("style","display:block;"),t.children[1].setAttribute("style","display:block;");const r=document.getElementById("continue");r.setAttribute("style","display:none")})}(e),Object(c.e)(e.project),Object(a.a)({title:"Overview",projectCount:localStorage.projectCount,taskCount:localStorage.taskCount}),document.getElementById("project-count").innerText=localStorage.projectCount}catch(e){console.warn(e),Object(i.a)(e)}}var E=()=>{document.getElementById("full-width-modal").addEventListener("submit",h)},f=n(16);var j=n(32),w=n(34);const{pmBackend:{api:x,apiversion:k}}=n(4),B=e=>new Promise((t,n)=>{fetch(`${x}/${k}/events`,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(e),credentials:"include"}).then(e=>e.json()).then(e=>t(e)).catch(e=>n(e))});var I=n(11);const L=()=>{const e=Object(j.a)(new Date,"yyyy-MM-dd"),t=document.getElementById("event-date-button");t.value=e;const n=Object(j.a)(new Date,"HH:mm"),a=document.getElementById("event-time-start-button");a.value=n;const l=Object(w.a)(new Date,{minutes:(new Date).getMinutes()+15}),o=Object(j.a)(new Date(l),"HH:mm"),d=document.getElementById("event-time-end-button");d.value=o;const c=document.getElementById("event-title-button");document.getElementById("event-save-button").addEventListener("click",async function e(n){const l=new Date(`${t.value}T${a.value}:00`),o=new Date(`${t.value}T${d.value}:00`),r={date:t.value,events:[{title:c.value,start:l.getTime(),end:o.getTime()}]};try{Object(I.a)(!0);const e=await B(r);e.error?(console.warn(e.message),Object(i.a)(e.message),Object(I.a)(!1)):(Object(i.b)(e.message),Object(I.a)(!1),document.getElementById("calendar-link").click())}catch(e){console.warn(e),Object(i.a)(e),Object(I.a)(!1)}console.log("Payload sent!",r),this.removeEventListener("click",e)})};var T=n(22),O=n(26),M=n(23);const $=e=>{console.log("info :",e);const t=Object(j.a)(new Date(e.startStr),"yyyy-MM-dd"),n=document.getElementById("event-date-drag");n.value=t;const a=Object(j.a)(new Date(e.startStr),"HH:mm"),l=document.getElementById("event-time-start-drag");l.value=a;const o=Object(j.a)(new Date(e.endStr),"HH:mm"),d=document.getElementById("event-time-end-drag");d.value=o;const c=document.getElementById("event-title-drag"),r=document.createElement("a");r.setAttribute("data-toggle","modal"),r.setAttribute("data-target","#add-event-drag"),document.getElementsByTagName("body")[0].appendChild(r),document.querySelector('a[data-target="#add-event-drag"]').click(),document.querySelector('a[data-target="#add-event-drag"]').remove(),document.getElementById("event-save-drag").addEventListener("click",async function e(t){const a=new Date(`${n.value}T${l.value}:00`),o=new Date(`${n.value}T${d.value}:00`),r={date:n.value,events:[{title:c.value,start:a.getTime(),end:o.getTime()}]};try{Object(I.a)(!0);const e=await B(r);console.log("eventResponse :",e),e.error?(console.warn(e.message),Object(i.a)(e.message),Object(I.a)(!1)):(Object(i.b)(e.message),Object(I.a)(!1),document.getElementById("calendar-link").click())}catch(e){console.warn(e),Object(i.a)(e),Object(I.a)(!1)}console.log("Payload sent!",r),this.removeEventListener("click",e)})},{pmBackend:{api:H,apiversion:D}}=n(4),C={plugins:[T.a,O.a,M.a],defaultView:"timeGridDay",selectable:!0,selectMirror:!0,navLinks:!0,editable:!0,eventLimit:!0,nowIndicator:!0,header:{left:"prev,next today",center:"title",right:"timeGridWeek,timeGridDay,listWeek"},select:function(e){$(e)},events:`${H}/${D}/events`},S=async e=>{try{Object(I.a)(!0);const t=await(e=>new Promise((t,n)=>{fetch(`${x}/${k}/events/${e}`,{method:"DELETE",credentials:"include"}).then(e=>e.json()).then(e=>t(e)).catch(e=>n(e))}))(e.target.id);t.error?(Object(I.a)(!1),Object(i.a)(t.message)):(Object(I.a)(!1),Object(i.b)(t.message),document.getElementById(e.target.id).parentElement.parentElement.remove())}catch(e){console.warn(e),Object(I.a)(!1),Object(i.a)(e.message)}},A=e=>{let t="";e.forEach(e=>{t+=`<tr>\n                <th scope="row">${Object(j.a)(new Date(e.start),"EEEE")}</th>\n                <td>${Object(j.a)(new Date(e.start),"KK:mmaaaa")} -\n                  ${Object(j.a)(new Date(e.end),"KK:mmaaaa")}</td>\n                <td class="event-title">${e.title}</td>\n                <td>${Object(j.a)(new Date(e.start),"MMMM dd, y")}</td>\n                <td style="width: 20%">\n                <button id="${e.start}" type="button" class="close" >×</button>\n                </td>\n            </tr>`});const n=document.getElementById("event-list-placeholder");n.innerHTML=t,n.addEventListener("click",function(e){"Edit"===e.target.innerHTML||"close"===e.target.className&&S(e)}),document.getElementById("event-close-button-edit-event").addEventListener("click",function e(){document.getElementById("calendar-link").click(),this.removeEventListener("click",e)}),document.getElementById("event-x-button-edit-event").addEventListener("click",function e(){document.getElementById("calendar-link").click(),this.removeEventListener("click",e)})},P=()=>{document.getElementById("edit-events").addEventListener("click",function e(){q(),this.removeEventListener("click",e)})},q=async()=>{const e=`start=${(()=>{let e=new Date;return e.setHours(-144),e.setHours(0,0,0,0),e.getTime()})()}&end=${(()=>{let e=new Date;return e.setHours(24),e.setHours(0,0,0,0),e.getTime()})()}`,t=await(e=>new Promise((t,n)=>{fetch(`${x}/${k}/events?${e}`,{method:"GET",headers:{"Content-type":"application/json"},credentials:"include"}).then(e=>e.json()).then(e=>t(e)).catch(e=>n(e))}))(e);A(t)},K=()=>{document.getElementById("main-placeholder").innerHTML='\x3c!-- start calendar --\x3e\n<div class="row">\n    <div class="col-12">\n        <div class="card">\n            <div class="card-body">\n                <div class="row">\n\n                    <div class="col-lg-12">\n                        <div id="calendar"></div>\n                    </div> \x3c!-- end col --\x3e\n\n                    \x3c!-- Add Event Button --\x3e\n                    <div class="col-lg-12">\n                        <a id="create-new-event" href="#" data-toggle="modal" data-target="#add-event-button"\n                            class="btn btn-lg font-16 btn-success btn-block mt-1">\n                            <i class="mdi mdi-plus-circle-outline"></i> Create New Event\n                        </a>\n                    </div> \x3c!-- end col--\x3e\n\n                    \x3c!-- Edit Events Button --\x3e\n                    <div class="col-lg-12">\n                        <a id="edit-events" href="#" data-toggle="modal" data-target="#edit-events-button"\n                            class="btn btn-lg font-16 btn-primary btn-block mt-1">\n                            <i class="mdi mdi-plus-circle-outline"></i> Edit Events\n                        </a>\n                    </div> \x3c!-- end col--\x3e\n\n                </div> \x3c!-- end row --\x3e\n            </div> \x3c!-- end card body--\x3e\n        </div> \x3c!-- end card --\x3e\n\n        \x3c!-- Modal Add Event Button --\x3e\n        <div class="modal fade" id="add-event-button" tabindex="-1">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h4 class="modal-title">Add an event</h4>\n                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                    </div>\n                    <div class="modal-body p-3">\n                        <form>\n                            <div class="form-group">\n                                <label class="control-label" for="event-title-button">Event Title</label>\n                                <input class="form-control form-white" type="text" id="event-title-button"\n                                    name="category-name" placeholder="Enter title" />\n                            </div>\n                            <div class="form-group">\n                                <label class="control-label" for="event-date-button">Date</label>\n                                <input class="form-control form-white" type="date" id="event-date-button"\n                                    name="event-date">\n                            </div>\n                            <div class="form-group">\n                                <label class="control-label" for="event-time-start">Time start</label>\n                                <input class="form-control form-white" type="time" id="event-time-start-button"\n                                    name="time">\n                            </div>\n                            <div class="form-group">\n                                <label class="control-label" for="event-time-end">Time end</label>\n                                <input class="form-control form-white" type="time" id="event-time-end-button"\n                                    name="time">\n                            </div>\n                            <div class="form-group">\n                                <label class="control-label">Choose Event Color</label>\n                                <select class="form-control form-white" data-placeholder="Choose a color..."\n                                    name="category-color">\n                                    <option value="primary">Primary</option>\n                                    <option value="success">Success</option>\n                                    <option value="danger">Danger</option>\n                                    <option value="info">Info</option>\n                                    <option value="warning">Warning</option>\n                                    <option value="dark">Dark</option>\n                                </select>\n                            </div>\n                        </form>\n                        <div class="text-right pt-2">\n                            <button id="event-close-button-add-event" type="button" class="btn btn-light"\n                                data-dismiss="modal">Close</button>\n                            <button id="event-save-button" type="button" class="btn btn-primary ml-1 save-category"\n                                data-dismiss="modal">Save</button>\n                        </div>\n                    </div> \x3c!-- end modal-body--\x3e\n                </div> \x3c!-- end modal-content--\x3e\n            </div> \x3c!-- end modal dialog--\x3e\n        </div>\n        \x3c!-- end modal--\x3e\n\n        \x3c!-- Modal Add Event Drag --\x3e\n        <div class="modal fade" id="add-event-drag" tabindex="-1">\n            <div class="modal-dialog">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h4 class="modal-title">Add an event</h4>\n                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                    </div>\n                    <div class="modal-body p-3">\n                        <form>\n                            <div class="form-group">\n                                <label class="control-label" for="event-title">Event Title</label>\n                                <input class="form-control form-white" type="text" id="event-title-drag"\n                                    name="category-name" placeholder="Enter title" />\n                            </div>\n                            <div class="form-group">\n                                <label class="control-label" for="event-date">Date</label>\n                                <input class="form-control form-white" type="date" id="event-date-drag"\n                                    name="event-date">\n                            </div>\n                            <div class="form-group">\n                                <label class="control-label" for="event-time-start">Time start</label>\n                                <input class="form-control form-white" type="time" id="event-time-start-drag"\n                                    name="time">\n                            </div>\n                            <div class="form-group">\n                                <label class="control-label" for="event-time-end">Time end</label>\n                                <input class="form-control form-white" type="time" id="event-time-end-drag" name="time">\n                            </div>\n                            <div class="form-group">\n                                <label class="control-label">Choose Event Color</label>\n                                <select class="form-control form-white" data-placeholder="Choose a color..."\n                                    name="category-color">\n                                    <option value="primary">Primary</option>\n                                    <option value="success">Success</option>\n                                    <option value="danger">Danger</option>\n                                    <option value="info">Info</option>\n                                    <option value="warning">Warning</option>\n                                    <option value="dark">Dark</option>\n                                </select>\n                            </div>\n                        </form>\n                        <div class="text-right pt-2">\n                            <button id="event-close-drag" type="button" class="btn btn-light"\n                                data-dismiss="modal">Close</button>\n                            <button id="event-save-drag" type="button" class="btn btn-primary ml-1 save-category"\n                                data-dismiss="modal">Save</button>\n                        </div>\n                    </div> \x3c!-- end modal-body--\x3e\n                </div> \x3c!-- end modal-content--\x3e\n            </div> \x3c!-- end modal dialog--\x3e\n        </div>\n        \x3c!-- end modal--\x3e\n        \n        \x3c!-- Modal Edit Events Button --\x3e\n        <div class="modal fade" id="edit-events-button" tabindex="-1">\n            <div class="modal-dialog modal-full modal-dialog-scrollable">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h4 class="modal-title">Edit events</h4>\n                        <button id="event-x-button-edit-event" type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>\n                    </div>\n                    <div class="modal-body p-3">\n                        <div class="table-responsive">\n                            <table class="table mb-0">\n                            <thead class="thead-light">\n                                <tr>\n                                    <th>Day</th>\n                                    <th>Time</th>\n                                    <th>Title</th>\n                                    <th>Date</th>\n                                    <th>Edit</th>\n                                </tr>\n                            </thead>\n                            <tbody id="event-list-placeholder"></tbody>\n                            </table>\n                        </div>\n                        <div class="text-right pt-2">\n                            <button id="event-close-button-edit-event" type="button" class="btn btn-light"\n                                data-dismiss="modal">Close</button>\n                        </div>\n                    </div> \x3c!-- end modal-body--\x3e\n                </div> \x3c!-- end modal-content--\x3e\n            </div> \x3c!-- end modal dialog--\x3e\n        </div>\n        \x3c!-- end modal--\x3e\n\n    </div>\n    \x3c!-- end col-12 --\x3e\n</div>\n\x3c!-- end row --\x3e',n.e(11).then(n.t.bind(null,28,7)),n.e(13).then(n.t.bind(null,29,7)),n.e(12).then(n.t.bind(null,30,7)),n.e(10).then(n.t.bind(null,31,7));setTimeout(()=>{(()=>{const e=document.getElementById("calendar");new f.a(e,C).render()})(),L(),P()},150)};var N=n(0);document.querySelector(".breadcrumb-item.active").innerHTML="Overview",Object(a.a)({title:"Overview",projectCount:localStorage.projectCount,taskCount:localStorage.taskCount}),Object(l.a)(),E(),document.getElementById("overview-link").addEventListener("click",o.a),document.getElementById("project-menu-dropdown").addEventListener("click",o.a),document.getElementById("calendar-link").addEventListener("click",K),document.getElementById("logout").addEventListener("click",async()=>{await Object(N.logOutCall)(),window.location.reload()})}}]);